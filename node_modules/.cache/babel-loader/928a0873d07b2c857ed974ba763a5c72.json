{"ast":null,"code":"var _jsxFileName = \"/Users/josephpongonthara/Desktop/palantir_aip/personal_proshop_tennis/src/pages/PageTwo.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport '../App.css';\nconst PageTwo = () => {\n  var _location$state;\n  const location = useLocation();\n  const navigate = useNavigate();\n  const formState = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.formState;\n  const [userId, setUserId] = useState(null);\n  const [recommendationData, setRecommendationData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [matchError, setMatchError] = useState(null);\n  //fade in animation\n  const fadeInVariant = {\n    hidden: {\n      opacity: 0,\n      y: 10\n    },\n    visible: i => ({\n      opacity: 1,\n      y: 0,\n      transition: {\n        delay: i * 0.05\n      }\n    })\n  };\n  const handleReset = () => {\n    navigate('/');\n  };\n  const normalize = value => typeof value === 'string' ? value.trim().toLowerCase() : value;\n  useEffect(() => {\n    const fetchUserProfilesAndMatch = async () => {\n      try {\n        // 1. Fetch all user profiles\n        const userRes = await fetch('http://localhost:5001/api/user-profiles');\n        if (!userRes.ok) {\n          const errorText = await userRes.text();\n          throw new Error(`UserProfile to fetch: ${userRes.status} - ${errorText}`);\n        }\n        const userData = await userRes.json();\n        const users = userData.data;\n        console.log('Fetched UserProfiles:', users);\n        console.log('FormState:', formState);\n        const arraysEqualIgnoreOrder = (a, b) => {\n          if (!Array.isArray(a) || !Array.isArray(b)) return false;\n          if (a.length !== b.length) return false;\n          return [...a].sort().every((val, idx) => val === [...b].sort()[idx]);\n        };\n\n        //match formstate to a user profile\n        const matchedUser = users.find(user => {\n          const brandMatch = arraysEqualIgnoreOrder(formState.brands, user.preferredBrand);\n          const aspectMatch = arraysEqualIgnoreOrder(formState.optimize, user.aspectsToOptimize);\n          const matchConditions = {\n            equipmentType: normalize(user.equipmentType) === normalize(formState.equipment),\n            brandMatch,\n            aspectMatch,\n            skillLevel: normalize(user.skillLevel) === normalize(formState.playStyle),\n            playFrequency: String(user.playFrequency) === String(formState.frequency)\n          };\n          console.log('Checking user:', user);\n          console.log('Match conditions:', matchConditions);\n          return Object.values(matchConditions).every(Boolean);\n        });\n        if (!matchedUser) {\n          setMatchError('No matching user profile found.');\n          setLoading(false);\n          return;\n        }\n\n        //const userId = matchedUser.__primaryKey || matchedUser.id;\n        //setUserId(userId);\n        console.log('Matched user:', matchedUser);\n        const userId = matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.userId;\n        console.log('Looking for recommendations linked to userId:', userId);\n        const MAX_ATTEMPTS = 18; // 12 x 5s = 60s timeout\n        const DELAY_MS = 5000;\n        const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n        let attempts = 0;\n        let matchedResult = null;\n        while (attempts < MAX_ATTEMPTS && !matchedResult) {\n          console.log(`Polling attempt ${attempts + 1} for recommendations...`);\n          const recRes = await fetch('http://localhost:5001/api/results');\n          if (!recRes.ok) {\n            const errorText = await recRes.text();\n            throw new Error(`RecommendationResult fetch failed: ${recRes.status} - ${errorText}`);\n          }\n          const recData = await recRes.json();\n          const results = recData.data;\n          console.log('Results received:', results);\n          matchedResult = results.find(result => result.linkedUser === userId);\n          if (!matchedResult) {\n            attempts++;\n            if (attempts < MAX_ATTEMPTS) {\n              await wait(DELAY_MS);\n            }\n          }\n        }\n        if (!matchedResult) {\n          setMatchError('No matching recommendation found.');\n          setLoading(false);\n          return;\n        }\n        console.log('Matched recommendation result:', matchedResult);\n        //storing matched recommendation\n        setRecommendationData({\n          racketId: matchedResult.racketId,\n          stringId: matchedResult.stringId,\n          reasoning: matchedResult.llmExplanation\n        });\n      } catch (err) {\n        console.error('Error fetching or matching data:', err);\n        setMatchError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (formState) {\n      fetchUserProfilesAndMatch();\n    } else {\n      setMatchError('No form data available.');\n      setLoading(false);\n    }\n  }, [formState]);\n\n  // LOADING & CHECKING FOR ERRORS   \n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/logo.png\",\n      alt: \"Logo\",\n      className: \"logo-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, \"Personal Pro Shop\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, (formState === null || formState === void 0 ? void 0 : formState.name) ? `Hang tight, ${formState.name} â€” we're building your personalized recommendations...` : \"Loading user profile...\"));\n  }\n  if (matchError) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/logo.png\",\n      alt: \"Logo\",\n      className: \"logo-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }, \"Personal Pro Shop\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, \"Error: \", matchError));\n  }\n  //MAIN RENDER\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/logo.png\",\n    alt: \"Logo\",\n    className: \"logo-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, \"Personal Pro Shop\")), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"main-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }\n  }, \"Your Personalized Recommendations\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recommendation spaced\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, !recommendationData.racketId.includes(\"This equipment type was not requested\") && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"equipment-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, \"Racket Recommendation:\"), recommendationData.racketId.split(\",\").map((racket, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, racket.trim()))), !recommendationData.stringId.includes(\"This equipment type was not requested\") && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"equipment-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, \"String Recommendation:\"), recommendationData.stringId.split(\",\").map((string, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 19\n    }\n  }, string.trim()))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"equipment-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, \"Explanation:\"), recommendationData.llmExplanation.split(',').map((explanation, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index,\n    className: \"fade-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, explanation.trim())))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"submit-button\",\n    onClick: handleReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, \"Start Over\"));\n};\nexport default PageTwo;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","PageTwo","_location$state","location","navigate","formState","state","userId","setUserId","recommendationData","setRecommendationData","loading","setLoading","matchError","setMatchError","fadeInVariant","hidden","opacity","y","visible","i","transition","delay","handleReset","normalize","value","trim","toLowerCase","fetchUserProfilesAndMatch","userRes","fetch","ok","errorText","text","Error","status","userData","json","users","data","console","log","arraysEqualIgnoreOrder","a","b","Array","isArray","length","sort","every","val","idx","matchedUser","find","user","brandMatch","brands","preferredBrand","aspectMatch","optimize","aspectsToOptimize","matchConditions","equipmentType","equipment","skillLevel","playStyle","playFrequency","String","frequency","Object","values","Boolean","MAX_ATTEMPTS","DELAY_MS","wait","ms","Promise","resolve","setTimeout","attempts","matchedResult","recRes","recData","results","result","linkedUser","racketId","stringId","reasoning","llmExplanation","err","error","message","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","name","includes","split","map","racket","index","key","string","explanation","onClick"],"sources":["/Users/josephpongonthara/Desktop/palantir_aip/personal_proshop_tennis/src/pages/PageTwo.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport '../App.css';\n\nconst PageTwo = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const formState = location.state?.formState;\n\n  const [userId, setUserId] = useState(null);\n  const [recommendationData, setRecommendationData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [matchError, setMatchError] = useState(null);\n  //fade in animation\n  const fadeInVariant = {\n    hidden: { opacity: 0, y: 10 },\n    visible: i => ({\n      opacity: 1,\n      y: 0,\n      transition: { delay: i * 0.05 }\n    })\n  };\n\n\n  const handleReset = () => {\n    navigate('/');\n  };\n\n  const normalize = (value) =>\n    typeof value === 'string' ? value.trim().toLowerCase() : value;\n\n  useEffect(() => {\n    const fetchUserProfilesAndMatch = async () => {\n      try {\n        // 1. Fetch all user profiles\n        const userRes = await fetch('http://localhost:5001/api/user-profiles');\n        if (!userRes.ok) {\n          const errorText = await userRes.text();\n          throw new Error(`UserProfile to fetch: ${userRes.status} - ${errorText}`);\n        }\n\n        const userData = await userRes.json();\n        const users = userData.data;\n\n        console.log('Fetched UserProfiles:', users);\n        console.log('FormState:', formState);\n\n        const arraysEqualIgnoreOrder = (a, b) => {\n          if (!Array.isArray(a) || !Array.isArray(b)) return false;\n          if (a.length !== b.length) return false;\n          return [...a].sort().every((val, idx) => val === [...b].sort()[idx]);\n        };        \n\n        //match formstate to a user profile\n        const matchedUser = users.find(user => {\n          const brandMatch = arraysEqualIgnoreOrder(formState.brands, user.preferredBrand);\n          const aspectMatch = arraysEqualIgnoreOrder(formState.optimize, user.aspectsToOptimize);\n\n          const matchConditions = {\n            equipmentType: normalize(user.equipmentType) === normalize(formState.equipment),\n            brandMatch,\n            aspectMatch,\n            skillLevel: normalize(user.skillLevel) === normalize(formState.playStyle),\n            playFrequency: String(user.playFrequency) === String(formState.frequency)\n            };\n\n            console.log('Checking user:', user);\n            console.log('Match conditions:', matchConditions);\n      \n          return Object.values(matchConditions).every(Boolean);\n        });\n\n        if (!matchedUser){\n          setMatchError('No matching user profile found.');\n          setLoading(false);\n          return;\n        }\n        \n        //const userId = matchedUser.__primaryKey || matchedUser.id;\n        //setUserId(userId);\n        console.log('Matched user:', matchedUser);\n        const userId = matchedUser?.userId;\n        console.log('Looking for recommendations linked to userId:', userId);\n\n        const MAX_ATTEMPTS = 18; // 12 x 5s = 60s timeout\n        const DELAY_MS = 5000;\n\n        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n        let attempts = 0;\n        let matchedResult = null;\n\n        while (attempts < MAX_ATTEMPTS && !matchedResult) {\n          console.log(`Polling attempt ${attempts + 1} for recommendations...`);\n\n          const recRes = await fetch('http://localhost:5001/api/results');\n          if (!recRes.ok) {\n            const errorText = await recRes.text();\n            throw new Error(`RecommendationResult fetch failed: ${recRes.status} - ${errorText}`);\n          }\n\n          const recData = await recRes.json();\n          const results = recData.data;\n\n          console.log('Results received:', results);\n\n          matchedResult = results.find(result => result.linkedUser === userId);\n\n          if (!matchedResult) {\n            attempts++;\n            if (attempts < MAX_ATTEMPTS) {\n              await wait(DELAY_MS);\n            }\n          }\n        }\n\n        if (!matchedResult) {\n          setMatchError('No matching recommendation found.');\n          setLoading(false);\n          return;\n        }\n        console.log('Matched recommendation result:', matchedResult);\n        //storing matched recommendation\n        setRecommendationData({\n          racketId: matchedResult.racketId,\n          stringId: matchedResult.stringId,\n          reasoning: matchedResult.llmExplanation,\n        });\n      } catch (err) {\n        console.error('Error fetching or matching data:', err);\n        setMatchError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (formState) {\n      fetchUserProfilesAndMatch();\n    } else {\n      setMatchError('No form data available.');\n      setLoading(false);\n    }\n  }, [formState]);\n\n// LOADING & CHECKING FOR ERRORS   \n  if (loading) {\n    return (\n      <div className=\"page\">\n        <div className=\"logo-title\">\n          <img src=\"/logo.png\" alt=\"Logo\" className=\"logo-image\" />\n          <h1 className=\"title\">Personal Pro Shop</h1>\n        </div>\n        <div className=\"loader\">\n          {formState?.name\n            ? `Hang tight, ${formState.name} â€” we're building your personalized recommendations...`\n            : \"Loading user profile...\"}\n        </div>\n      </div>\n    );\n  }\n  if (matchError) {\n    return (\n      <div className=\"page\">\n        <div className=\"logo-title\">\n          <img src=\"/logo.png\" alt=\"Logo\" className=\"logo-image\" />\n          <h1 className=\"title\">Personal Pro Shop</h1>\n        </div>\n        <div className=\"error\">Error: {matchError}</div>\n      </div>\n    );\n  }\n  //MAIN RENDER\n  return (\n    <div className=\"page\">\n      {/* LOGO & TITLE (repeat from PageOne) */}\n      <div className=\"logo-title\">\n        <img src=\"/logo.png\" alt=\"Logo\" className=\"logo-image\" />\n        <h1 className=\"title\">Personal Pro Shop</h1>\n      </div>\n  \n      <h2 className=\"main-header\">Your Personalized Recommendations</h2>\n  \n      <div className=\"recommendation spaced\">\n        {/* Racket */}\n        {!recommendationData.racketId.includes(\"This equipment type was not requested\") && (\n            <div className=\"equipment-block\">\n              <strong>Racket Recommendation:</strong>\n              {recommendationData.racketId\n                .split(\",\")\n                .map((racket, index) => (\n                  <p key={index}>{racket.trim()}</p>\n                ))}\n            </div>\n          )}\n\n          {/* String */}\n          {!recommendationData.stringId.includes(\"This equipment type was not requested\") && (\n            <div className=\"equipment-block\">\n              <strong>String Recommendation:</strong>\n              {recommendationData.stringId\n                .split(\",\")\n                .map((string, index) => (\n                  <p key={index}>{string.trim()}</p>\n                ))}\n            </div>\n          )}\n  \n          {/* LLM Explanation */}\n          <div className=\"equipment-block\">\n            <strong>Explanation:</strong>\n            {recommendationData.llmExplanation\n              .split(',')\n              .map((explanation, index) => (\n                <p key={index} className=\"fade-line\">\n                  {explanation.trim()}\n                </p>\n            ))}\n          </div>\n      </div>\n  \n      <button className=\"submit-button\" onClick={handleReset}>\n        Start Over\n      </button>\n    </div>\n  );\n};\n\nexport default PageTwo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}